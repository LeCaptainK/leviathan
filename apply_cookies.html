<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apply Cookies</title>
  </head>
  <body>
    <h1>Redirecting...</h1>
    <script>
      (() => {
        // Check if the extension is installed and active
        if (typeof chrome !== 'undefined' && chrome.runtime) {
          document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const cookies = urlParams.get('url');
            if (cookies) {
              chrome.runtime.sendMessage({ action: 'applyCookies', cookies }, (response) => {
                if (response.success) {
                  window.location.href = 'https://www.banquetrecords.com/cart';
                } else {
                  console.error('Failed to apply cookies');
                }
              });
            }
          });
        } else {
          // Display an error message if the extension is not installed or active
          document.querySelector('h1').textContent = 'Error: The Leviathan extension is not installed or active.';
        }
      })();
    </script>
  </body>
</html>
